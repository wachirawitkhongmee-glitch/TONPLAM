<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Ñ‡∏£‡∏±‡∏ß‡∏´‡∏£‡∏£‡∏©‡∏≤</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Page specific styles */
        .cook-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            padding-bottom: 50px;
        }

        .ingredient-panel {
            flex: 1;
            min-width: 300px;
        }

        .recipe-panel {
            flex: 1;
            min-width: 300px;
        }

        .category-title {
            font-size: 1.2rem;
            color: #555;
            margin: 15px 0 10px 0;
            text-align: left;
            font-weight: bold;
        }

        .ingredient-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
        }

        .ing-card {
            background: white;
            border: 2px solid #EEE;
            border-radius: 15px;
            padding: 10px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            user-select: none;
        }

        .ing-card:hover {
            border-color: #DDD;
            transform: translateY(-2px);
        }

        .ing-card.selected {
            border-color: #FFB7B2;
            background: #FFEBEE;
            box-shadow: 0 4px 0 #FFB7B2;
            transform: translateY(-2px);
        }

        .ing-card.selected .emoji {
            transform: scale(1.2);
        }

        .emoji {
            font-size: 2rem;
            transition: transform 0.2s;
        }

        .name {
            font-size: 0.9rem;
            margin-top: 5px;
            color: #555;
        }

        /* Recipe Cards */
        .recipe-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            border: 3px solid #eee;
            position: relative;
            overflow: hidden;
            transition: all 0.3s;
        }

        .recipe-match-high {
            border-color: #81C784;
            background: #F1F8E9;
        }

        .recipe-match-med {
            border-color: #FFF176;
            background: #FFFDE7;
        }

        .recipe-match-low {
            border-color: #E0E0E0;
            opacity: 0.8;
        }

        .match-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #333;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: bold;
        }

        .match-100 {
            background: #43A047;
        }

        .match-high {
            background: #7CB342;
        }

        .match-med {
            background: #FDD835;
            color: #444;
        }

        .match-low {
            background: #9E9E9E;
        }

        .recipe-title {
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        .missing-ing {
            color: #E57373;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .method-btn {
            margin-top: 10px;
            padding: 8px 15px;
            font-size: 0.9rem;
            background: white;
            border: 2px solid #ddd;
            border-radius: 20px;
            cursor: pointer;
        }

        .method-box {
            margin-top: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 10px;
            text-align: left;
            display: none;
            font-size: 1rem;
            line-height: 1.6;
        }

        /* Fixed bottom bar */
        .selection-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            padding: 15px;
            box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            border-radius: 20px 20px 0 0;
        }

        @media (max-width: 600px) {
            .cook-container {
                flex-direction: column;
            }
        }
    </style>
</head>

<body class="bg-cartoon" style="display: block; overflow-y: auto;">

    <div class="page" style="max-width: 900px; margin: 0 auto; padding-bottom: 100px;">

        <div class="top-bar">
            <div class="app-title" style="font-size: 1.5rem; color: #FF6F61;">‡∏Ñ‡∏£‡∏±‡∏ß‡∏´‡∏£‡∏£‡∏©‡∏≤ üç≥</div>
            <button class="icon-btn" onclick="goToHome()">üè† ‡∏Å‡∏•‡∏±‡∏ö‡∏ö‡πâ‡∏≤‡∏ô</button>
        </div>

        <div class="cook-container">

            <!-- Left: Ingredients -->
            <div class="ingredient-panel">
                <div class="cartoon-card" style="text-align: left;">
                    <h2 style="margin-top: 0;">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏ó‡∏µ‡πà‡∏°‡∏µ üëá</h2>
                    <p style="margin-bottom: 10px;">‡∏Å‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡πÉ‡∏ô‡∏ï‡∏π‡πâ‡πÄ‡∏¢‡πá‡∏ô‡πÄ‡∏•‡∏¢!</p>

                    <div id="ing-container"></div>
                </div>
            </div>

            <!-- Right: Recipes -->
            <div class="recipe-panel">
                <div class="cartoon-card" style="min-height: 200px;">
                    <h2>‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÑ‡∏î‡πâ üçΩ</h2>
                    <div id="recipe-list">
                        <p style="color: #888; margin-top: 50px;">üëà ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏ó‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢<br>‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏£‡πà‡∏≠‡∏¢‡πÜ</p>
                    </div>
                </div>
            </div>

        </div>

    </div>

    <div class="selection-bar">
        <div style="font-weight: bold; color: #555;">
            ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß <span id="count-badge"
                style="background: #FF6F61; color: white; padding: 2px 8px; border-radius: 10px;">0</span> ‡∏≠‡∏¢‡πà‡∏≤‡∏á
        </div>
        <button class="cartoon-btn" style="width: auto; padding: 10px 20px; font-size: 1rem; margin-top: 0;"
            onclick="clearAll()">‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
    </div>

    <script>
        // --- Data ---
        const categories = {
            meats: "‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏±‡∏ï‡∏ß‡πå ü•©",
            veg: "‡∏ú‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡πÑ‡∏°‡πâ ü•¨",
            carb: "‡∏Ç‡πâ‡∏≤‡∏ß/‡πÅ‡∏õ‡πâ‡∏á üçö",
            other: "‡∏≠‡∏∑‡πà‡∏ô‡πÜ üßÄ"
        };

        const ingredients = [
            // Meats
            { id: "egg", name: "‡πÑ‡∏Ç‡πà", emoji: "ü•ö", cat: "meats" },
            { id: "pork", name: "‡∏´‡∏°‡∏π", emoji: "üêñ", cat: "meats" },
            { id: "chicken", name: "‡πÑ‡∏Å‡πà", emoji: "üêì", cat: "meats" },
            { id: "beef", name: "‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ß‡∏±‡∏ß", emoji: "üêÑ", cat: "meats" },
            { id: "shrimp", name: "‡∏Å‡∏∏‡πâ‡∏á", emoji: "ü¶ê", cat: "meats" },
            { id: "squid", name: "‡∏õ‡∏•‡∏≤‡∏´‡∏°‡∏∂‡∏Å", emoji: "ü¶ë", cat: "meats" },
            { id: "fish", name: "‡∏õ‡∏•‡∏≤", emoji: "üêü", cat: "meats" },
            { id: "sausage", name: "‡πÑ‡∏™‡πâ‡∏Å‡∏£‡∏≠‡∏Å", emoji: "üå≠", cat: "meats" },
            { id: "bacon", name: "‡πÄ‡∏ö‡∏Ñ‡∏≠‡∏ô", emoji: "ü•ì", cat: "meats" },
            { id: "ham", name: "‡πÅ‡∏Æ‡∏°", emoji: "üçñ", cat: "meats" },
            { id: "minced_pork", name: "‡∏´‡∏°‡∏π‡∏™‡∏±‡∏ö", emoji: "ü•©", cat: "meats" },
            { id: "crab_stick", name: "‡∏õ‡∏π‡∏≠‡∏±‡∏î", emoji: "üç•", cat: "meats" },
            { id: "canned_fish", name: "‡∏õ‡∏•‡∏≤‡∏Å‡∏£‡∏∞‡∏õ‡πã‡∏≠‡∏á", emoji: "ü•´", cat: "meats" },

            // Veg
            { id: "garlic", name: "‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°", emoji: "üßÑ", cat: "veg" },
            { id: "chili", name: "‡∏û‡∏£‡∏¥‡∏Å", emoji: "üå∂", cat: "veg" },
            { id: "onion", name: "‡∏´‡∏≠‡∏°‡πÉ‡∏´‡∏ç‡πà", emoji: "üßÖ", cat: "veg" },
            { id: "carrot", name: "‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó", emoji: "ü•ï", cat: "veg" },
            { id: "cabbage", name: "‡∏Å‡∏∞‡∏´‡∏•‡πà‡∏≥‡∏õ‡∏•‡∏µ", emoji: "ü•¨", cat: "veg" },
            { id: "chinese_kale", name: "‡∏Ñ‡∏∞‡∏ô‡πâ‡∏≤", emoji: "ü•¨", cat: "veg" },
            { id: "morning_glory", name: "‡∏ú‡∏±‡∏Å‡∏ö‡∏∏‡πâ‡∏á", emoji: "üåø", cat: "veg" },
            { id: "basil", name: "‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤", emoji: "üåø", cat: "veg" },
            { id: "spring_onion", name: "‡∏ï‡πâ‡∏ô‡∏´‡∏≠‡∏°", emoji: "üå±", cat: "veg" },
            { id: "tomato", name: "‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏®", emoji: "üçÖ", cat: "veg" },
            { id: "potato", name: "‡∏°‡∏±‡∏ô‡∏ù‡∏£‡∏±‡πà‡∏á", emoji: "ü•î", cat: "veg" },
            { id: "cucumber", name: "‡πÅ‡∏ï‡∏á‡∏Å‡∏ß‡∏≤", emoji: "ü•í", cat: "veg" },
            { id: "mushroom", name: "‡πÄ‡∏´‡πá‡∏î", emoji: "üçÑ", cat: "veg" },
            { id: "corn", name: "‡∏Ç‡πâ‡∏≤‡∏ß‡πÇ‡∏û‡∏î", emoji: "üåΩ", cat: "veg" },
            { id: "lime", name: "‡∏°‡∏∞‡∏ô‡∏≤‡∏ß", emoji: "üçã", cat: "veg" },
            { id: "papaya", name: "‡∏°‡∏∞‡∏•‡∏∞‡∏Å‡∏≠", emoji: "üçà", cat: "veg" },

            // Carb
            { id: "rice", name: "‡∏Ç‡πâ‡∏≤‡∏ß‡∏™‡∏ß‡∏¢", emoji: "üçö", cat: "carb" },
            { id: "bread", name: "‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á", emoji: "üçû", cat: "carb" },
            { id: "noodle", name: "‡πÄ‡∏™‡πâ‡∏ô‡∏Å‡πã‡∏ß‡∏¢‡πÄ‡∏ï‡∏µ‡πã‡∏¢‡∏ß", emoji: "üçú", cat: "carb" },
            { id: "instant_noodle", name: "‡∏°‡∏≤‡∏°‡πà‡∏≤", emoji: "üçú", cat: "carb" },
            { id: "pasta", name: "‡∏û‡∏≤‡∏™‡∏ï‡πâ‡∏≤", emoji: "üçù", cat: "carb" },

            // Other
            { id: "cheese", name: "‡∏ä‡∏µ‡∏™", emoji: "üßÄ", cat: "other" },
            { id: "milk", name: "‡∏ô‡∏°", emoji: "ü•õ", cat: "other" },
            { id: "butter", name: "‡πÄ‡∏ô‡∏¢", emoji: "üßà", cat: "other" },
            { id: "mayo", name: "‡∏°‡∏≤‡∏¢‡∏≠‡∏á‡πÄ‡∏ô‡∏™", emoji: "ü•£", cat: "other" },
            { id: "curry_paste", name: "‡∏û‡∏£‡∏¥‡∏Å‡πÅ‡∏Å‡∏á", emoji: "ü•ò", cat: "other" }
        ];

        const recipes = [
            {
                name: "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡πÑ‡∏Ç‡πà",
                needs: ["rice", "egg"],
                opt: ["garlic", "spring_onion", "carrot", "pork", "sausage"],
                method: "1. ‡πÄ‡∏à‡∏µ‡∏¢‡∏ß‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°‡πÉ‡∏´‡πâ‡∏´‡∏≠‡∏° ‡πÉ‡∏™‡πà‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏ú‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏™‡∏∏‡∏Å<br>2. ‡πÉ‡∏™‡πà‡πÑ‡∏Ç‡πà ‡∏¢‡∏µ‡πÉ‡∏´‡πâ‡πÅ‡∏ï‡∏Å<br>3. ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≤‡∏ß‡∏™‡∏ß‡∏¢ ‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏™‡∏î‡πâ‡∏ß‡∏¢‡∏ã‡∏≠‡∏™<br>4. ‡πÉ‡∏™‡πà‡∏ú‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏ä‡∏≠‡∏ö ‡∏ú‡∏±‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ô"
            },
            {
                name: "‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤‡∏´‡∏°‡∏π‡∏™‡∏±‡∏ö",
                needs: ["minced_pork", "basil", "chili", "garlic"],
                method: "1. ‡∏ï‡∏≥‡∏û‡∏£‡∏¥‡∏Å‡∏Å‡∏±‡∏ö‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°<br>2. ‡∏ú‡∏±‡∏î‡∏û‡∏£‡∏¥‡∏Å‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°‡πÉ‡∏´‡πâ‡∏â‡∏∏‡∏ô ‡πÉ‡∏™‡πà‡∏´‡∏°‡∏π‡∏™‡∏±‡∏ö‡∏ú‡∏±‡∏î‡πÉ‡∏´‡πâ‡∏™‡∏∏‡∏Å<br>3. ‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏™ ‡πÉ‡∏™‡πà‡πÉ‡∏ö‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤ ‡∏Ñ‡∏•‡∏∏‡∏Å‡πÄ‡∏Ñ‡∏•‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏ó‡∏±‡πà‡∏ß"
            },
            {
                name: "‡πÑ‡∏Ç‡πà‡πÄ‡∏à‡∏µ‡∏¢‡∏ß",
                needs: ["egg"],
                opt: ["minced_pork", "onion", "spring_onion", "crab_stick"],
                method: "1. ‡∏ï‡∏≠‡∏Å‡πÑ‡∏Ç‡πà ‡∏ï‡∏µ‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ô<br>2. ‡πÉ‡∏™‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ä‡∏≠‡∏ö (‡∏´‡∏°‡∏π‡∏™‡∏±‡∏ö/‡∏´‡∏≠‡∏°‡πÉ‡∏´‡∏ç‡πà)<br>3. ‡∏ó‡∏≠‡∏î‡πÉ‡∏ô‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏£‡πâ‡∏≠‡∏ô‡πÜ ‡∏à‡∏ô‡∏ü‡∏π‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏ö"
            },
            {
                name: "‡∏°‡∏≤‡∏°‡πà‡∏≤‡∏ú‡∏±‡∏î‡∏Ç‡∏µ‡πâ‡πÄ‡∏°‡∏≤",
                needs: ["instant_noodle", "chili", "garlic", "basil"],
                opt: ["pork", "sausage", "cabbage"],
                method: "1. ‡∏•‡∏ß‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏°‡∏≤‡∏°‡πà‡∏≤‡∏û‡∏±‡∏Å‡πÑ‡∏ß‡πâ<br>2. ‡∏ú‡∏±‡∏î‡∏û‡∏£‡∏¥‡∏Å‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏° ‡πÉ‡∏™‡πà‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏±‡∏ï‡∏ß‡πå<br>3. ‡πÉ‡∏™‡πà‡πÄ‡∏™‡πâ‡∏ô ‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏™ ‡πÉ‡∏™‡πà‡πÉ‡∏ö‡∏Å‡∏∞‡πÄ‡∏û‡∏£‡∏≤ ‡∏ú‡∏±‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ô‡πÅ‡∏£‡∏á‡πÜ"
            },
            {
                name: "‡πÅ‡∏ã‡∏ô‡∏ß‡∏¥‡∏ä‡πÅ‡∏Æ‡∏°‡∏ä‡∏µ‡∏™",
                needs: ["bread", "ham", "cheese"],
                method: "1. ‡∏ß‡∏≤‡∏á‡πÅ‡∏Æ‡∏°‡πÅ‡∏•‡∏∞‡∏ä‡∏µ‡∏™‡∏ö‡∏ô‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á<br>2. ‡∏õ‡∏£‡∏∞‡∏Å‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡∏≠‡∏µ‡∏Å‡πÅ‡∏ú‡πà‡∏ô<br>3. ‡∏≠‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏µ‡πà‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡∏ó‡∏∞‡πÉ‡∏´‡πâ‡∏ä‡∏µ‡∏™‡πÄ‡∏¢‡∏¥‡πâ‡∏°‡πÜ"
            },
            {
                name: "‡∏Ç‡πâ‡∏≤‡∏ß‡∏ï‡πâ‡∏°‡∏´‡∏°‡∏π‡∏™‡∏±‡∏ö",
                needs: ["rice", "minced_pork"],
                opt: ["garlic", "spring_onion"],
                method: "1. ‡∏ï‡πâ‡∏°‡∏ô‡πâ‡∏≥‡∏ã‡∏∏‡∏õ ‡πÉ‡∏™‡πà‡∏´‡∏°‡∏π‡∏™‡∏±‡∏ö‡∏õ‡∏±‡πâ‡∏ô‡∏Å‡πâ‡∏≠‡∏ô<br>2. ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≤‡∏ß‡∏™‡∏ß‡∏¢ ‡∏ï‡πâ‡∏°‡∏à‡∏ô‡∏ô‡∏∏‡πà‡∏°<br>3. ‡πÇ‡∏£‡∏¢‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°‡πÄ‡∏à‡∏µ‡∏¢‡∏ß‡πÅ‡∏•‡∏∞‡∏ï‡πâ‡∏ô‡∏´‡∏≠‡∏°"
            },
            {
                name: "‡∏™‡∏∏‡∏Å‡∏µ‡πâ‡πÅ‡∏´‡πâ‡∏á",
                needs: ["cabbage", "egg", "pork"], // Basic suki needs
                opt: ["morning_glory", "carrot", "celery", "noodle"],
                method: "1. ‡∏•‡∏ß‡∏Å‡∏ú‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏±‡∏ï‡∏ß‡πå<br>2. ‡∏ú‡∏±‡∏î‡πÑ‡∏Ç‡πà‡πÅ‡∏•‡∏∞‡πÉ‡∏™‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î<br>3. ‡πÉ‡∏™‡πà‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡∏™‡∏∏‡∏Å‡∏µ‡πâ ‡∏ú‡∏±‡∏î‡πÉ‡∏´‡πâ‡πÅ‡∏´‡πâ‡∏á‡∏û‡∏≠‡∏Ç‡∏•‡∏∏‡∏Å‡∏Ç‡∏•‡∏¥‡∏Å"
            },
            {
                name: "‡∏¢‡∏≥‡∏õ‡∏•‡∏≤‡∏Å‡∏£‡∏∞‡∏õ‡πã‡∏≠‡∏á",
                needs: ["canned_fish", "lime", "chili", "onion"],
                method: "1. ‡πÄ‡∏ó‡∏õ‡∏•‡∏≤‡∏Å‡∏£‡∏∞‡∏õ‡πã‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏à‡∏≤‡∏ô<br>2. ‡∏ã‡∏≠‡∏¢‡∏´‡∏≠‡∏°‡πÉ‡∏´‡∏ç‡πà‡πÅ‡∏•‡∏∞‡∏û‡∏£‡∏¥‡∏Å ‡πÉ‡∏™‡πà‡∏•‡∏á‡πÑ‡∏õ<br>3. ‡∏ö‡∏µ‡∏ö‡∏°‡∏∞‡∏ô‡∏≤‡∏ß ‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏™‡∏ï‡∏≤‡∏°‡∏ä‡∏≠‡∏ö"
            },
            {
                name: "‡πÄ‡∏ü‡∏£‡∏ô‡∏ä‡πå‡∏ü‡∏£‡∏≤‡∏¢‡∏™‡πå",
                needs: ["potato"],
                method: "1. ‡∏õ‡∏≠‡∏Å‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏±‡∏ô‡∏ù‡∏£‡∏±‡πà‡∏á ‡∏´‡∏±‡πà‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ó‡πà‡∏á<br>2. ‡πÅ‡∏ä‡πà‡∏ô‡πâ‡∏≥‡πÄ‡∏Å‡∏•‡∏∑‡∏≠ ‡πÅ‡∏•‡πâ‡∏ß‡∏ã‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÅ‡∏´‡πâ‡∏á<br>3. ‡∏ó‡∏≠‡∏î‡πÑ‡∏ü‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏ô‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏ö"
            },
            {
                name: "‡πÑ‡∏Ç‡πà‡∏ï‡∏∏‡πã‡∏ô",
                needs: ["egg"],
                opt: ["minced_pork", "carrot", "spring_onion"],
                method: "1. ‡∏ï‡∏µ‡πÑ‡∏Ç‡πà‡∏Å‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡∏ã‡∏∏‡∏õ (‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô 1:2)<br>2. ‡∏Å‡∏£‡∏≠‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏ô‡∏µ‡∏¢‡∏ô ‡πÉ‡∏™‡πà‡∏ñ‡πâ‡∏ß‡∏¢<br>3. ‡∏ô‡∏∂‡πà‡∏á‡πÑ‡∏ü‡∏≠‡πà‡∏≠‡∏ô‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 15-20 ‡∏ô‡∏≤‡∏ó‡∏µ"
            },
            {
                name: "‡∏ú‡∏±‡∏î‡∏ú‡∏±‡∏Å‡∏£‡∏ß‡∏°‡∏°‡∏¥‡∏ï‡∏£",
                needs: ["carrot", "cabbage", "garlic"],
                opt: ["pork", "chicken", "mushroom", "corn", "broccoli"],
                method: "1. ‡∏ú‡∏±‡∏î‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°‡πÉ‡∏´‡πâ‡∏´‡∏≠‡∏° ‡πÉ‡∏™‡πà‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏™‡∏±‡∏ï‡∏ß‡πå<br>2. ‡πÉ‡∏™‡πà‡∏ú‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏Å‡∏¢‡∏≤‡∏Å‡∏Å‡πà‡∏≠‡∏ô (‡πÅ‡∏Ñ‡∏£‡∏≠‡∏ó)<br>3. ‡πÉ‡∏™‡πà‡∏ú‡∏±‡∏Å‡πÉ‡∏ö ‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏™‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏´‡∏≠‡∏¢"
            },
            {
                name: "‡∏Ç‡πâ‡∏≤‡∏ß‡πÑ‡∏Ç‡πà‡∏Ç‡πâ‡∏ô",
                needs: ["rice", "egg", "milk"],
                opt: ["shrimp", "ham", "sausage"],
                method: "1. ‡∏ï‡∏µ‡πÑ‡∏Ç‡πà‡∏ú‡∏™‡∏°‡∏ô‡∏°‡∏™‡∏î‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢<br>2. ‡∏ï‡∏±‡πâ‡∏á‡∏Å‡∏£‡∏∞‡∏ó‡∏∞‡πÑ‡∏ü‡∏≠‡πà‡∏≠‡∏ô ‡πÄ‡∏ó‡πÑ‡∏Ç‡πà‡∏•‡∏á‡πÑ‡∏õ<br>3. ‡∏Ñ‡∏ô‡πÄ‡∏ö‡∏≤‡πÜ ‡πÉ‡∏´‡πâ‡πÑ‡∏Ç‡πà‡∏™‡∏∏‡∏Å‡∏û‡∏≠‡πÄ‡∏¢‡∏¥‡πâ‡∏°‡πÜ ‡∏£‡∏≤‡∏î‡∏ö‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß‡∏™‡∏ß‡∏¢"
            },
            {
                name: "‡∏ï‡∏≥‡πÅ‡∏ï‡∏á",
                needs: ["cucumber", "chili", "garlic", "lime", "tomato"],
                method: "1. ‡πÇ‡∏Ç‡∏•‡∏Å‡∏û‡∏£‡∏¥‡∏Å‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°<br>2. ‡πÉ‡∏™‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∏‡∏á ‡∏°‡∏∞‡∏ô‡∏≤‡∏ß ‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤<br>3. ‡∏™‡∏±‡∏ö‡πÅ‡∏ï‡∏á‡∏Å‡∏ß‡∏≤‡πÉ‡∏™‡πà‡∏•‡∏á‡πÑ‡∏õ ‡∏ï‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ô"
            },
            {
                name: "‡πÅ‡∏û‡∏ô‡πÄ‡∏Ñ‡πâ‡∏Å‡∏Å‡∏•‡πâ‡∏ß‡∏¢ (‡∏Ñ‡∏•‡∏µ‡∏ô)",
                needs: ["egg"], // Assuming banana might be needed, adding banana dynamically? Or just basics.
                // wait, I don't have banana in list. Let's act like we have. 
                // Actually let's add banana to list or remove this recipe. 
                // Let's remove for now to be safe or add banana.
                // Adding Banana to ingredients:
                method: "..."
            },
            {
                name: "‡∏™‡∏õ‡∏≤‡πÄ‡∏Å‡πá‡∏ï‡∏ï‡∏µ‡πâ‡∏ã‡∏≠‡∏™‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏®",
                needs: ["pasta", "tomato", "minced_pork"],
                opt: ["onion", "ketchup"],
                method: "1. ‡∏ï‡πâ‡∏°‡πÄ‡∏™‡πâ‡∏ô‡∏û‡∏≤‡∏™‡∏ï‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏™‡∏∏‡∏Å<br>2. ‡∏ú‡∏±‡∏î‡∏´‡∏≠‡∏°‡πÉ‡∏´‡∏ç‡πà ‡∏´‡∏°‡∏π‡∏™‡∏±‡∏ö ‡πÅ‡∏•‡∏∞‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏®‡∏™‡∏±‡∏ö<br>3. ‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏™‡πÄ‡∏õ‡πá‡∏ô‡∏ã‡∏≠‡∏™ ‡∏£‡∏≤‡∏î‡∏ö‡∏ô‡πÄ‡∏™‡πâ‡∏ô"
            }
        ];

        // --- Logic ---
        let selected = new Set();

        function init() {
            const container = document.getElementById("ing-container");

            // Render Categories
            for (let catKey in categories) {
                // Title
                let h = document.createElement("div");
                h.className = "category-title";
                h.innerText = categories[catKey];
                container.appendChild(h);

                // Grid
                let grid = document.createElement("div");
                grid.className = "ingredient-grid";

                ingredients.filter(x => x.cat === catKey).forEach(ing => {
                    let card = document.createElement("div");
                    card.className = "ing-card";
                    card.onclick = () => toggle(ing.id, card);
                    card.innerHTML = `<span class="emoji">${ing.emoji}</span><span class="name">${ing.name}</span>`;
                    card.dataset.id = ing.id;
                    grid.appendChild(card);
                });

                container.appendChild(grid);
            }
        }

        function toggle(id, card) {
            if (selected.has(id)) {
                selected.delete(id);
                card.classList.remove("selected");
            } else {
                selected.add(id);
                card.classList.add("selected");
            }
            updateUI();
        }

        function updateUI() {
            document.getElementById("count-badge").innerText = selected.size;
            findRecipes();
        }

        function clearAll() {
            selected.clear();
            document.querySelectorAll(".ing-card.selected").forEach(c => c.classList.remove("selected"));
            updateUI();
        }

        function findRecipes() {
            const list = document.getElementById("recipe-list");
            list.innerHTML = "";

            if (selected.size === 0) {
                list.innerHTML = `<p style="color: #888; margin-top: 50px;">üëà ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏ó‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢<br>‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏£‡πà‡∏≠‡∏¢‡πÜ</p>`;
                return;
            }

            // Calculate matches
            let results = recipes.map(r => {
                let have = 0;
                let missing = [];

                // Count core needs
                r.needs.forEach(n => {
                    if (selected.has(n)) have++;
                    else missing.push(ingredientName(n));
                });

                // Count bonus matching options (just adds to percentage if we have them?)
                // Standard logic: Percentage = (Have Needs / Total Needs) * 100
                // BUT if we have optional items, maybe boost score or highlight?
                // Let's stick to Core Needs for percentage to keep it simple but accurate.

                let percent = Math.round((have / r.needs.length) * 100);

                // Boost logic: If 100% matched, but we also have optional ingredients, good!

                return { ...r, percent, missing };
            });

            // Filter: Show anything > 0% match? Or maybe > 20%?
            // Let's show anything that matches at least 1 ingredient selected OR > 50%?
            // Better: Sort by percentage desc.

            results.sort((a, b) => b.percent - a.percent);

            // Render
            let foundAny = false;
            results.forEach(r => {
                if (r.percent == 0) return; // Don't show completely irrelevant stuff? 
                // Actually user wants to see what they can make. Showing 0% is useless.
                // Showing low % might be inspiring.

                foundAny = true;
                let card = document.createElement("div");

                // Style based on percentage
                let styleClass = "recipe-match-low";
                let badgeClass = "match-low";
                let badgeText = r.percent + "%";

                if (r.percent === 100) { styleClass = "recipe-match-high"; badgeClass = "match-100"; badgeText = "‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢! üíØ"; }
                else if (r.percent >= 66) { styleClass = "recipe-match-high"; badgeClass = "match-high"; }
                else if (r.percent >= 33) { styleClass = "recipe-match-med"; badgeClass = "match-med"; }

                card.className = `recipe-card ${styleClass}`;

                let missingText = r.missing.length > 0 ? `‡∏Ç‡∏≤‡∏î: ${r.missing.join(", ")}` : "‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡πâ‡∏ß!";

                card.innerHTML = `
          <div class="match-badge ${badgeClass}">${badgeText}</div>
          <div class="recipe-title">${r.name}</div>
          <p>‡πÉ‡∏ä‡πâ: ${r.needs.map(n => ingredientName(n)).join(", ")}</p>
          ${r.percent < 100 ? `<div class="missing-ing">${missingText}</div>` : ""}
          
          <button class="method-btn" onclick="toggleMethod(this)">üìñ ‡∏î‡∏π‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏≥</button>
          <div class="method-box">${r.method}</div>
        `;

                list.appendChild(card);
            });

            if (!foundAny) {
                list.innerHTML = `<p style="color: #888; margin-top: 50px;">üòî ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏ô‡∏µ‡πâ<br>‡∏•‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏î‡∏π‡∏ô‡∏∞!</p>`;
            }
        }

        function ingredientName(id) {
            let f = ingredients.find(x => x.id === id);
            return f ? f.name : id;
        }

        function toggleMethod(btn) {
            let box = btn.nextElementSibling;
            if (box.style.display === "block") {
                box.style.display = "none";
                btn.innerText = "üìñ ‡∏î‡∏π‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏≥";
            } else {
                box.style.display = "block";
                btn.innerText = "‡∏ã‡πà‡∏≠‡∏ô‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏≥";
            }
        }

        function goToHome() {
            location.href = "food.html"; // Go back to food hub
        }

        window.onload = init;

        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register("service-worker.js");
        }
    </script>

</body>

</html>